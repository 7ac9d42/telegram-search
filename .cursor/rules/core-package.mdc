---
description:
globs:
alwaysApply: false
---
# Core Package

[packages/core](mdc:packages/core) 是项目的核心包，负责与 Telegram API 的交互以及数据库操作。

## 主要组件

- **Models**: [packages/core/src/models](mdc:packages/core/src/models) 包含了数据模型定义
  - [chat-message.ts](mdc:packages/core/src/models/chat-message.ts): 聊天消息模型
  - [chats.ts](mdc:packages/core/src/models/chats.ts): 聊天会话模型
  - [common.ts](mdc:packages/core/src/models/common.ts): 通用模型定义

- **Services**: [packages/core/src/services](mdc:packages/core/src/services) 包含核心服务
  - [connection.ts](mdc:packages/core/src/services/connection.ts): Telegram 连接管理
  - [message.ts](mdc:packages/core/src/services/message.ts): 消息处理服务
  - [dialog.ts](mdc:packages/core/src/services/dialog.ts): 对话服务
  - [session.ts](mdc:packages/core/src/services/session.ts): 会话管理

- **Database**: [packages/core/src/db](mdc:packages/core/src/db) 包含数据库相关代码
  - [schema.ts](mdc:packages/core/src/db/schema.ts): 数据库表结构

- **事件处理**: [packages/core/src/event-handler.ts](mdc:packages/core/src/event-handler.ts) 和 [packages/core/src/event-handlers](mdc:packages/core/src/event-handlers) 负责事件处理

## 上下文管理

[context.ts](mdc:packages/core/src/context.ts) 提供了应用的上下文管理，包括 Telegram 客户端实例和数据库连接。
